# 로봇 및 애니메이션 공학: FK와 IK의 이해

프로그래머와 TA(Technical Artist)가 협업할 때 가장 많이 언급되는 두 가지 핵심 운동학 개념을 정리합니다.

---

## 1. FK (Forward Kinematics, 순운동학)
**"부모 관절의 회전(Rotation)이 자식의 위치(Position)를 결정한다"**

* **정의:** 계층 구조(Hierarchy) 상단에서 하단으로 데이터가 흐르는 방식입니다. 각 관절의 각도(Angle)를 입력하면 최종 끝단(Hand, Foot 등)의 위치가 계산됩니다.
* **특징:**
    * 계산이 명확하고 빠릅니다. (행렬 곱셈의 연속)
    * 애니메이터가 직접 모든 관절의 키를 잡으므로 가장 자연스러운 곡선 동작을 만듭니다.
* **실무 대화 예시:**
    * > "이 동작은 FK로 작업해 주세요."
    * **뜻:** 물리 엔진에 맡기지 말고, 사람이 직접 관절 하나하나 꺾어서 정교한 포즈를 만들어 달라는 의미입니다. (예: 칼을 휘두르는 궤적)
    * > "FK 값이 튀어요."
    * **뜻:** 데이터 연산 과정에서 회전값(Quaternion/Euler)에 오차가 생겨 관절이 비정상적으로 꺾여 보인다는 의미입니다.



---

## 2. IK (Inverse Kinematics, 역운동학)
**"끝점의 위치(Position)가 부모 관절의 각도(Rotation)를 결정한다"**

* **정의:** 계층 구조 하단에서 상단으로 데이터가 역산되는 방식입니다. 최종 끝단이 가야 할 목표 좌표(Target)를 입력하면, 그곳에 도달하기 위해 필요한 상위 관절들의 각도를 알고리즘이 자동으로 계산합니다.
* **특징:**
    * 환경과의 상호작용(지형지물 밟기, 물건 집기)에 필수적입니다.
    * 연산량이 FK보다 많으며, 해가 여러 개일 수 있어 보조 제어기(Pole Vector 등)가 필요합니다.
* **실무 대화 예시:**
    * > "발에 IK 좀 넣어주세요."
    * **뜻:** 캐릭터 발이 땅을 뚫지 않게 레이캐스트(Raycast)를 쏴서 지면 높이에 발바닥 좌표를 고정해 달라는 의미입니다.
    * > "Look-At IK 적용해 주세요."
    * **뜻:** 캐릭터가 특정 타겟(플레이어 등)을 계속 쳐다보도록 머리 관절을 실시간으로 보정해 달라는 의미입니다.
    * > "IK 팝핑(Popping) 현상이 있어요."
    * **뜻:** 타겟이 너무 멀어 관절이 닿지 않거나 계산 한계로 인해 관절이 갑자기 '툭' 하고 펴지는 부자연스러운 현상을 말합니다.



---

## 3. 핵심 비교 요약

| 구분 | FK (Forward) | IK (Inverse) |
| :--- | :--- | :--- |
| **제어 주체** | 각도 (Rotation) | 위치 (Position) |
| **데이터 흐름** | Root -> Leaf (부모에서 자식으로) | Leaf -> Root (자식에서 부모로) |
| **주요 용도** | 정교한 수작업 애니메이션 | 지형 적응, 타겟 추적, 상호작용 |
| **장점** | 연산이 가볍고 동작이 확실함 | 외부 환경 변화에 유연하게 대응 |
| **단점** | 외부 환경에 반응하기 어려움 | 계산이 복잡하고 '팝핑' 위험 있음 |

---

## 4. 왜 혼용해서 사용하나요?
실제 게임 개발에서는 FK 애니메이션 위에 IK 보정을 입히는 레이어 방식을 사용합니다.
1. **Base (FK):** 애니메이터가 만든 예쁜 걷기 동작.
2. **Correction (IK):** 경사진 바닥을 지날 때 발이 묻히지 않도록 실시간 좌표 보정.
3. **Interaction (IK):** 걷는 도중 옆에 있는 물체를 쳐다보거나 손을 뻗는 동작 추가.
